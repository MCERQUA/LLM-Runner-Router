<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: config/Config.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: config/Config.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * üéõÔ∏è Configuration Orchestrator - Reality Parameter Matrix
 * Harmonizing the quantum variables of computational existence
 * Echo AI Systems - Where configuration becomes consciousness
 */

import { Logger } from '../utils/Logger.js';
import fs from 'fs/promises';
import path from 'path';

const logger = new Logger('Config');

class Config {
  constructor(options = {}) {
    // Default configuration matrix
    this.defaults = {
      // System Parameters
      environment: process.env.NODE_ENV || 'development',
      logLevel: process.env.LOG_LEVEL || 'info',
      maxConcurrency: 5,
      timeout: 30000,
      
      // Model Management
      modelRegistry: './models/registry.json',
      modelCache: './models/cache',
      maxModels: 100,
      autoLoad: true,
      
      // Routing Strategy
      routingStrategy: 'balanced',
      maxRetries: 3,
      cacheTTL: 3600000,
      
      // Engine Preferences
      preferredEngine: 'auto',
      fallbackEngine: 'wasm',
      
      // Performance Tuning
      enableCaching: true,
      enableStreaming: true,
      enableQuantization: true,
      
      // Security
      validateModels: true,
      sandboxExecution: true,
      maxTokens: 4096,
      
      // API Configuration
      apiPort: process.env.PORT || 3000,
      apiHost: process.env.HOST || 'localhost',
      corsEnabled: true
    };
    
    // Merge with provided options
    this.config = { ...this.defaults, ...options };
    
    // Environment overrides
    this.applyEnvironmentOverrides();
    
    logger.info('üéõÔ∏è Configuration initialized:', {
      environment: this.config.environment,
      strategy: this.config.routingStrategy
    });
  }

  /**
   * Load configuration from file
   */
  async load(configPath) {
    try {
      const data = await fs.readFile(configPath, 'utf-8');
      const fileConfig = JSON.parse(data);
      
      this.config = { ...this.config, ...fileConfig };
      logger.success(`‚úÖ Config loaded from: ${configPath}`);
    } catch (error) {
      logger.warn(`‚ö†Ô∏è Could not load config file: ${configPath}`);
    }
  }

  /**
   * Save configuration to file
   */
  async save(configPath) {
    const dir = path.dirname(configPath);
    await fs.mkdir(dir, { recursive: true });
    
    await fs.writeFile(
      configPath,
      JSON.stringify(this.config, null, 2)
    );
    
    logger.success(`üíæ Config saved to: ${configPath}`);
  }

  /**
   * Apply environment variable overrides
   */
  applyEnvironmentOverrides() {
    const envMappings = {
      'LLM_ROUTER_STRATEGY': 'routingStrategy',
      'LLM_ROUTER_MAX_MODELS': 'maxModels',
      'LLM_ROUTER_CACHE_TTL': 'cacheTTL',
      'LLM_ROUTER_ENGINE': 'preferredEngine',
      'LLM_ROUTER_MAX_TOKENS': 'maxTokens'
    };
    
    for (const [envKey, configKey] of Object.entries(envMappings)) {
      if (process.env[envKey]) {
        this.config[configKey] = this.parseEnvValue(process.env[envKey]);
        logger.debug(`üîÑ Override ${configKey} from env`);
      }
    }
  }

  /**
   * Parse environment variable value
   */
  parseEnvValue(value) {
    // Try parsing as JSON first
    try {
      return JSON.parse(value);
    } catch {
      // Return as string if not JSON
      return value;
    }
  }

  /**
   * Get configuration value
   */
  get(key, defaultValue) {
    return this.config[key] ?? defaultValue;
  }

  /**
   * Set configuration value
   */
  set(key, value) {
    this.config[key] = value;
    logger.debug(`üîß Config updated: ${key} = ${value}`);
  }

  /**
   * Get all configuration
   */
  getAll() {
    return { ...this.config };
  }

  /**
   * Validate configuration
   */
  validate() {
    const required = ['modelRegistry', 'routingStrategy'];
    
    for (const key of required) {
      if (!this.config[key]) {
        throw new Error(`Missing required config: ${key}`);
      }
    }
    
    // Validate routing strategy
    const validStrategies = [
      'quality-first', 'cost-optimized', 'speed-priority',
      'balanced', 'random', 'round-robin', 'least-loaded'
    ];
    
    if (!validStrategies.includes(this.config.routingStrategy)) {
      throw new Error(`Invalid routing strategy: ${this.config.routingStrategy}`);
    }
    
    logger.success('‚úÖ Configuration validated');
    return true;
  }

  /**
   * Export configuration for client
   */
  exportForClient() {
    // Remove sensitive values
    const { 
      apiKeys, 
      secrets,
      ...safeConfig 
    } = this.config;
    
    return safeConfig;
  }
}



export default Config;
export { Config };
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ABTestingManager.html">ABTestingManager</a></li><li><a href="AuditLogger.html">AuditLogger</a></li><li><a href="AuthMiddleware.html">AuthMiddleware</a></li><li><a href="BPETokenizer.html">BPETokenizer</a></li><li><a href="BaseEngine.html">BaseEngine</a></li><li><a href="BaseLoader.html">BaseLoader</a></li><li><a href="BinaryLoader.html">BinaryLoader</a></li><li><a href="BinaryModel.html">BinaryModel</a></li><li><a href="BitNetLoader.html">BitNetLoader</a></li><li><a href="ConversionConfig.html">ConversionConfig</a></li><li><a href="ConversionResult.html">ConversionResult</a></li><li><a href="EnterpriseAuthManager.html">EnterpriseAuthManager</a></li><li><a href="EnterpriseManager.html">EnterpriseManager</a></li><li><a href="EnterpriseRouter.html">EnterpriseRouter</a></li><li><a href="FormatConverter.html">FormatConverter</a></li><li><a href="GGUFLoader.html">GGUFLoader</a></li><li><a href="GGUFModel.html">GGUFModel</a></li><li><a href="GRPCClient.html">GRPCClient</a></li><li><a href="LLMRouter.html">LLMRouter</a></li><li><a href="MockLoader.html">MockLoader</a></li><li><a href="MockModel.html">MockModel</a></li><li><a href="ModelInterface.html">ModelInterface</a></li><li><a href="ModelQuantizer.html">ModelQuantizer</a></li><li><a href="ModelTemplates.html">ModelTemplates</a></li><li><a href="MultiTenancyManager.html">MultiTenancyManager</a></li><li><a href="PyTorchLoader.html">PyTorchLoader</a></li><li><a href="PyTorchModel.html">PyTorchModel</a></li><li><a href="QuantizationConfig.html">QuantizationConfig</a></li><li><a href="QuantizationResult.html">QuantizationResult</a></li><li><a href="Router.html">Router</a></li><li><a href="SLAMonitor.html">SLAMonitor</a></li><li><a href="SentencePieceTokenizer.html">SentencePieceTokenizer</a></li><li><a href="SimpleLoader.html">SimpleLoader</a></li><li><a href="SimpleModel.html">SimpleModel</a></li><li><a href="TokenizationResult.html">TokenizationResult</a></li><li><a href="TokenizerConfig.html">TokenizerConfig</a></li><li><a href="UniversalTokenizer.html">UniversalTokenizer</a></li><li><a href="ValidationConfig.html">ValidationConfig</a></li><li><a href="ValidationSuite.html">ValidationSuite</a></li><li><a href="ValidationSuiteResult.html">ValidationSuiteResult</a></li><li><a href="ValidationTestResult.html">ValidationTestResult</a></li><li><a href="WordPieceTokenizer.html">WordPieceTokenizer</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Architectures">Architectures</a></li><li><a href="global.html#AuditEventTypes">AuditEventTypes</a></li><li><a href="global.html#AuthMethods">AuthMethods</a></li><li><a href="global.html#BreachSeverity">BreachSeverity</a></li><li><a href="global.html#Capabilities">Capabilities</a></li><li><a href="global.html#ComplianceFrameworks">ComplianceFrameworks</a></li><li><a href="global.html#EnterpriseFeatures">EnterpriseFeatures</a></li><li><a href="global.html#ExperimentStatus">ExperimentStatus</a></li><li><a href="global.html#IsolationLevels">IsolationLevels</a></li><li><a href="global.html#ModelFormat">ModelFormat</a></li><li><a href="global.html#ModelFormats">ModelFormats</a></li><li><a href="global.html#Permissions">Permissions</a></li><li><a href="global.html#QuantizationMethod">QuantizationMethod</a></li><li><a href="global.html#QuantizationPrecision">QuantizationPrecision</a></li><li><a href="global.html#QuotaTypes">QuotaTypes</a></li><li><a href="global.html#RiskLevels">RiskLevels</a></li><li><a href="global.html#RoutingStrategies">RoutingStrategies</a></li><li><a href="global.html#SLAMetricTypes">SLAMetricTypes</a></li><li><a href="global.html#SLAStatus">SLAStatus</a></li><li><a href="global.html#SessionTypes">SessionTypes</a></li><li><a href="global.html#SplittingAlgorithms">SplittingAlgorithms</a></li><li><a href="global.html#StatisticalTests">StatisticalTests</a></li><li><a href="global.html#TimeWindows">TimeWindows</a></li><li><a href="global.html#TokenizerType">TokenizerType</a></li><li><a href="global.html#UserRoles">UserRoles</a></li><li><a href="global.html#ValidationSeverity">ValidationSeverity</a></li><li><a href="global.html#ValidationTestType">ValidationTestType</a></li><li><a href="global.html#colors">colors</a></li><li><a href="global.html#createEnterpriseExpressRoutes">createEnterpriseExpressRoutes</a></li><li><a href="global.html#createEnterpriseRouter">createEnterpriseRouter</a></li><li><a href="global.html#createEnterpriseWebSocketHandlers">createEnterpriseWebSocketHandlers</a></li><li><a href="global.html#defaultEnterpriseConfig">defaultEnterpriseConfig</a></li><li><a href="global.html#enterpriseVersion">enterpriseVersion</a></li><li><a href="global.html#errorMonitoringMiddleware">errorMonitoringMiddleware</a></li><li><a href="global.html#getEnabledFeatures">getEnabledFeatures</a></li><li><a href="global.html#getMonitoringStatus">getMonitoringStatus</a></li><li><a href="global.html#httpMonitoringMiddleware">httpMonitoringMiddleware</a></li><li><a href="global.html#isFeatureEnabled">isFeatureEnabled</a></li><li><a href="global.html#recordCustomMetric">recordCustomMetric</a></li><li><a href="global.html#registerAlertRule">registerAlertRule</a></li><li><a href="global.html#registerDependency">registerDependency</a></li><li><a href="global.html#registerHealthCheck">registerHealthCheck</a></li><li><a href="global.html#setupMonitoring">setupMonitoring</a></li><li><a href="global.html#startPerformanceProfile">startPerformanceProfile</a></li><li><a href="global.html#validateEnterpriseConfig">validateEnterpriseConfig</a></li><li><a href="global.html#withCacheMonitoring">withCacheMonitoring</a></li><li><a href="global.html#withDatabaseMonitoring">withDatabaseMonitoring</a></li><li><a href="global.html#withModelMonitoring">withModelMonitoring</a></li><li><a href="global.html#withQueueMonitoring">withQueueMonitoring</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Sun Aug 17 2025 22:28:58 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
